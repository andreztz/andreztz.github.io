[{"categories":null,"content":"Hugo Quebrando o Build: Um Caso Pr√°tico Nos √∫ltimos meses, mantive meu sistema operacional Arch Linux atualizado diariamente. Como √© baseado no modelo rolling-release, o Arch Linux oferece as vers√µes mais recentes e est√°veis dos pacotes de software. Embora isso permita acesso r√°pido a novas funcionalidades, tamb√©m traz consigo alguns riscos. Hoje, ao realizar uma simples altera√ß√£o em uma imagem do meu blog, constru√≠do com o Hugo‚Äîum gerador de sites est√°ticos escrito em Go‚Äîencontrei um problema inesperado. O Hugo n√£o conseguiu processar as mudan√ßas, exibindo erros que interromperam o build. Mensagem de Erro: 19:36:54 with ztz in ~/Workspace/andreztz.github.io on ÓÇ† main ‚Ä¶ ‚ûú make rm -rf plublic/* hugo WARN DEPRECATED: Kind \"taxonomyterm\" used in outputs configuration is deprecated, use \"taxonomy\" instead. Start building sites ‚Ä¶ hugo v0.139.3+extended linux/amd64 BuildDate=unknown ERROR deprecated: .Site.Author was deprecated in Hugo v0.124.0 and will be removed in Hugo 0.140.0. Implement taxonomy 'author' or use .Site.Params.Author instead. ERROR deprecated: .Site.IsMultiLingual was deprecated in Hugo v0.124.0 and will be removed in Hugo 0.140.0. Use hugo.IsMultilingual instead. Total in 1046 ms Error: error building site: logged 2 error(s) make: *** [makefile:10: build] Error 1 O problema n√£o foi causado por um bug do Hugo, mas pela incompatibilidade entre o ambiente de desenvolvimento (rolling-release) e as mudan√ßas recentes no software. Isso resultou em breaking changes. ","date":"12-09-2024","objectID":"/hugo_quebrando_o_build_um_caso_pratico/:1:0","tags":null,"title":"Hugo Quebrando o Build: Um Caso Pr√°tico","uri":"/hugo_quebrando_o_build_um_caso_pratico/"},{"categories":null,"content":"O Que S√£o Breaking Changes? No contexto de desenvolvimento de software, breaking changes s√£o mudan√ßas em sistemas, APIs ou bibliotecas que quebram a compatibilidade com vers√µes anteriores. Isso exige que o c√≥digo dependente seja ajustado para funcionar corretamente. Essas altera√ß√µes s√£o inevit√°veis em projetos de software em constante evolu√ß√£o, mas podem gerar problemas se o ambiente de desenvolvimento ou produ√ß√£o n√£o acompanhar as atualiza√ß√µes. No meu caso, enquanto o Hugo foi automaticamente atualizado no Arch Linux, o c√≥digo do meu blog permaneceu inalterado, criando a incompatibilidade. ","date":"12-09-2024","objectID":"/hugo_quebrando_o_build_um_caso_pratico/:2:0","tags":null,"title":"Hugo Quebrando o Build: Um Caso Pr√°tico","uri":"/hugo_quebrando_o_build_um_caso_pratico/"},{"categories":null,"content":"Solu√ß√µes para o Problema Identifiquei duas abordagens poss√≠veis para resolver o problema: Atualizar o c√≥digo do blog: Ajustar arquivos de configura√ß√£o, temas e scripts para se adequar √† nova vers√£o do Hugo. Fazer o downgrade do Hugo: Reverter para uma vers√£o anterior do Hugo, compat√≠vel com o ambiente atual. Optei pelo downgrade do Hugo, pois foi a solu√ß√£o mais r√°pida e pr√°tica para o meu caso. ","date":"12-09-2024","objectID":"/hugo_quebrando_o_build_um_caso_pratico/:3:0","tags":null,"title":"Hugo Quebrando o Build: Um Caso Pr√°tico","uri":"/hugo_quebrando_o_build_um_caso_pratico/"},{"categories":null,"content":"Como Fazer o Downgrade do Hugo no Arch Linux ‚ö†Ô∏è Aten√ß√£o: O downgrade pode exigir altera√ß√µes nas depend√™ncias associadas ao pacote. Confira a documenta√ß√£o oficial para detalhes. Verificar depend√™ncias e conflitos Use o comando abaixo para identificar as depend√™ncias do Hugo: pactree -r hugo Listar vers√µes dispon√≠veis no cache Confira as vers√µes armazenadas localmente: ls /var/cache/pacman/pkg/hugo* Reinstalar a vers√£o desejada Reinstale a vers√£o do Hugo diretamente do cache: sudo pacman -U /var/cache/pacman/pkg/hugo-\u003cversao\u003e.pkg.tar.zst Bloquear atualiza√ß√µes futuras Adicione a seguinte linha no arquivo /etc/pacman.conf para evitar atualiza√ß√µes autom√°ticas do pacote: IgnorePkg = hugo Agora, ao executar sudo pacman -Syu, um aviso como este ser√° exibido: warning: hugo: ignoring package upgrade (0.135.0-1 =\u003e 0.139.3-1) Esse aviso √© a confirma√ß√£o que o hugo n√£o ser√° atualizado, pois est√° fixado na vers√£o 0.135.0. ","date":"12-09-2024","objectID":"/hugo_quebrando_o_build_um_caso_pratico/:4:0","tags":null,"title":"Hugo Quebrando o Build: Um Caso Pr√°tico","uri":"/hugo_quebrando_o_build_um_caso_pratico/"},{"categories":null,"content":"Ajustando o Workflow de deploy no GitHub Actions Al√©m de corrigir o ambiente local, foi necess√°rio ajustar o deploy no GitHub Actions, fixando a vers√£o compat√≠vel do Hugo na etapa de configura√ß√£o: - name: Setup Hugo uses: peaceiris/actions-hugo@v3 with: hugo-version: '0.135.0' # Vers√£o fixada, evite o uso de 'latest' extended: true Fixar a vers√£o evita surpresas com futuras atualiza√ß√µes que possam introduzir novas breaking changes. ","date":"12-09-2024","objectID":"/hugo_quebrando_o_build_um_caso_pratico/:5:0","tags":null,"title":"Hugo Quebrando o Build: Um Caso Pr√°tico","uri":"/hugo_quebrando_o_build_um_caso_pratico/"},{"categories":null,"content":"Li√ß√µes Aprendidas e Boas Pr√°ticas Breaking changes s√£o comuns em ambientes modernos, especialmente com ferramentas que evoluem rapidamente, como o Hugo. Para mitigar seus impactos, considere adotar boas pr√°ticas, como: Controlar atualiza√ß√µes autom√°ticas. Fixar vers√µes espec√≠ficas para desenvolvimento e produ√ß√£o. Manter-se informado sobre mudan√ßas nas ferramentas utilizadas. Outra abordagem interessante √© o uso de containers. Eles permitem criar ambientes isolados e controlados, garantindo: Reprodutibilidade. Isolamento. Facilidade no rollback. Essa experi√™ncia refor√ßa a import√¢ncia de planejar e gerenciar cuidadosamente o ambiente de desenvolvimento para minimizar impactos de atualiza√ß√µes inesperadas. ","date":"12-09-2024","objectID":"/hugo_quebrando_o_build_um_caso_pratico/:6:0","tags":null,"title":"Hugo Quebrando o Build: Um Caso Pr√°tico","uri":"/hugo_quebrando_o_build_um_caso_pratico/"},{"categories":null,"content":"KVM (Kernel-Based Virtual Machine) KVM √© uma infraestrutura de virtualiza√ß√£o integrada ao Linux √© faz uso das extens√µes de virtualiza√ß√£o do processador (como Intel VT-x e AMD-V). O KVM √© composto do modulo do kernel kvm.ko que fornece a infraestrutura principal de virtualiza√ß√£o e modulos especificos para processadores kvm-intel.ko e kvm-amd.ko. O KVM permite que uma m√°quina host execute v√°rios ambientes virtuais isolados, chamados de m√°quinas virtuais (VMs), transformando o Linux em um hipervisor. O KVM faz parte do kernel Linux a partir da vers√£o 2.6.20. ","date":"07-24-2023","objectID":"/maquinas_virtuais_no_arch_linux/:1:0","tags":null,"title":"M√°quinas virtuais no Arch Linux","uri":"/maquinas_virtuais_no_arch_linux/"},{"categories":null,"content":"QEMU O QEMU √© um emulador e virtualizador de m√°quinas de c√≥digo aberto. Ele permite a execu√ß√£o de sistemas operacionais e programas de diferentes plataformas (como ARM) em uma m√°quina host (como um PC x86) atrav√©s de uma t√©cnica chamada tradu√ß√£o din√¢mica. Esta t√©cnica traduz, em tempo real, o c√≥digo de m√°quina de uma arquitetura para outra, possibilitando um desempenho eficiente em compara√ß√£o com m√©todos mais lentos, como a interpreta√ß√£o de instru√ß√µes. Quando utilizado como virtualizador, o QEMU pode empregar hipervisores como KVM ou Xen, utilizando extens√µes de CPU (Intel VT-x ou AMD-V) para permitir que v√°rias m√°quinas virtuais rodem simultaneamente no mesmo hardware. Isso resulta em um desempenho quase nativo, j√° que o c√≥digo do sistema convidado √© executado diretamente na CPU do host. ","date":"07-24-2023","objectID":"/maquinas_virtuais_no_arch_linux/:2:0","tags":null,"title":"M√°quinas virtuais no Arch Linux","uri":"/maquinas_virtuais_no_arch_linux/"},{"categories":null,"content":"Diferen√ßa entre Emulador e Virtualizador: Emulador: Simula completamente o hardware de uma m√°quina diferente, permitindo a execu√ß√£o de sistemas operacionais e programas de uma arquitetura de CPU espec√≠fica em outra. Este processo envolve tradu√ß√£o de instru√ß√µes, o que geralmente resulta em desempenho mais lento. Virtualizador: Permite a execu√ß√£o simult√¢nea de m√∫ltiplos sistemas operacionais compat√≠veis com a arquitetura do host em um √∫nico hardware. Quando usado com KVM, o QEMU executa m√°quinas virtuais da mesma arquitetura da CPU do host, evitando a emula√ß√£o e proporcionando desempenho pr√≥ximo ao nativo. ","date":"07-24-2023","objectID":"/maquinas_virtuais_no_arch_linux/:3:0","tags":null,"title":"M√°quinas virtuais no Arch Linux","uri":"/maquinas_virtuais_no_arch_linux/"},{"categories":null,"content":"Pr√©-instala√ß√£o Para verificar se seu sistema suporta a virtualiza√ß√£o, execute os seguintes comandos: LC_ALL=C lscpu | grep Virtualization Virtualization: VT-x grep -E --color=auto 'vmx|svm|0xc0f' /proc/cpuinfo ... Se esses comandos n√£o retornarem nenhum resultado, √© prov√°vel que o suporte √† virtualiza√ß√£o esteja desativado na configura√ß√£o do BIOS/UEFI. A maioria dos processadores x86_64 AMD/Intel desenvolvidos a partir de 2000/2001 suportam virtualiza√ß√£o. ","date":"07-24-2023","objectID":"/maquinas_virtuais_no_arch_linux/:3:1","tags":null,"title":"M√°quinas virtuais no Arch Linux","uri":"/maquinas_virtuais_no_arch_linux/"},{"categories":null,"content":"Instalando pacotes necess√°rios O primeiro passo √© instalar os pacotes necess√°rios para executar o KVM: sudo pacman -S --needed qemu virt-manager virt-viewer dnsmasq vde2 bridge-utils openbsd-netcat ebtables iptables-nft ","date":"07-24-2023","objectID":"/maquinas_virtuais_no_arch_linux/:3:2","tags":null,"title":"M√°quinas virtuais no Arch Linux","uri":"/maquinas_virtuais_no_arch_linux/"},{"categories":null,"content":"Libguestfs A Libguestfs √© uma cole√ß√£o de ferramentas √∫teis para executar tarefas comuns em imagens de disco de VMs de forma segura, como acessar e editar arquivos, monitorar discos, clonar VMs, criar VMs e muito mais. Tamb√©m vem com um shell interativo (guestfish e virt-rescue). O pacote libguestfs esta dispon√≠vel no reposit√≥rio extra do Arch Linux, por tanto esse deve estar habilitado. sudo pacman -S --noconfirm --needed libguestfs ","date":"07-24-2023","objectID":"/maquinas_virtuais_no_arch_linux/:3:3","tags":null,"title":"M√°quinas virtuais no Arch Linux","uri":"/maquinas_virtuais_no_arch_linux/"},{"categories":null,"content":"Iniciando o servi√ßo libvirt no boot sudo systemctl enable libvirtd.service \u0026\u0026 systemctl start libvirtd.service ","date":"07-24-2023","objectID":"/maquinas_virtuais_no_arch_linux/:3:4","tags":null,"title":"M√°quinas virtuais no Arch Linux","uri":"/maquinas_virtuais_no_arch_linux/"},{"categories":null,"content":"Gerenciando KVMs como usu√°rio padr√£o Para gerenciar KVMs como usu√°rio padr√£o, execute os seguintes comandos: sudo usermod -a -G libvirt $(whoami) newgrp libvirt ","date":"07-24-2023","objectID":"/maquinas_virtuais_no_arch_linux/:3:5","tags":null,"title":"M√°quinas virtuais no Arch Linux","uri":"/maquinas_virtuais_no_arch_linux/"},{"categories":null,"content":"Reiniciando o servi√ßo libvirt sudo systemctl restart libvirtd.service ","date":"07-24-2023","objectID":"/maquinas_virtuais_no_arch_linux/:3:6","tags":null,"title":"M√°quinas virtuais no Arch Linux","uri":"/maquinas_virtuais_no_arch_linux/"},{"categories":null,"content":"Suporte para UEFI Para habilitar o suporte ao UEFI, instale o pacote ovmf com o comando: sudo pacman -S ovmf O que √© KVM? archlinux kvm libvirt Libguestfs Gerenciar KVMs como usu√°rio padr√£o ","date":"07-24-2023","objectID":"/maquinas_virtuais_no_arch_linux/:3:7","tags":null,"title":"M√°quinas virtuais no Arch Linux","uri":"/maquinas_virtuais_no_arch_linux/"},{"categories":null,"content":"O MPV √© um player de m√≠dia livre e de c√≥digo aberto que suporta uma ampla variedade de formatos de arquivo e codecs. Ele tem muitos recursos avan√ßados e √© altamente configur√°vel, mas √†s vezes pode ser √∫til control√°-lo programaticamente. Felizmente, o MPV possui uma interface de soquete que permite que outros processos controlem sua execu√ß√£o. Isso significa que √© poss√≠vel enviar enviar comandos para o MPV usando Python ou qualquer outra linguagem que suporte soquete. ","date":"04-12-2023","objectID":"/como_controlar_o_mpv_via_socket/:0:0","tags":null,"title":"Como controlar uma instancia do MPV via socket usando o Python","uri":"/como_controlar_o_mpv_via_socket/"},{"categories":null,"content":"Iniciando uma instancia do MPV ‚Äìinput-ipc-server= Enable the IPC support and create the listening socket at the given path. On Linux and Unix, the given path is a regular filesystem path. On Windows, named pipes are used, so the path refers to the pipe namespace (\\.\\pipe\u003cname\u003e). If the \\.\\pipe\\ prefix is missing, mpv will add it automatically before creating the pipe, so ‚Äìinput-ipc-server=/tmp/mpv-socket and ‚Äìinput-ipc-server=\\.\\pipe\\tmp\\mpv-socket are equivalent for IPC on Windows. Ao executar o mpv no linux por padr√£o um soquete √© iniciado em /tmp/mpvsocket, no entanto, √© poss√≠vel definir um exclusivo com a op√ß√£o --input-ipc-server=\u003cfilename\u003e. $ mpv --player-operation-mode=pseudo-gui --input-ipc-server=/tmp/my_mpvsocket ","date":"04-12-2023","objectID":"/como_controlar_o_mpv_via_socket/:1:0","tags":null,"title":"Como controlar uma instancia do MPV via socket usando o Python","uri":"/como_controlar_o_mpv_via_socket/"},{"categories":null,"content":"Configurando o soquete do tipo Unix Para enviar comandos ao MPV, √© necess√°rio estabelecer uma conex√£o com o soquete que o MPV est√° ouvindo. Para isso √© necess√°rio criar um objeto socket UNIX usando a biblioteca socket do Python e conect√°-lo ao caminho especificado na op√ß√£o ``‚Äìinput-ipc-server=`. import socket SOCKET_PATH = '/tmp/my_mpvsocket' with socket.socket(socket.AF_UNIX, socket.SOCK_STREAM) as s: s.connect(SOCKET_PATH) ","date":"04-12-2023","objectID":"/como_controlar_o_mpv_via_socket/:2:0","tags":null,"title":"Como controlar uma instancia do MPV via socket usando o Python","uri":"/como_controlar_o_mpv_via_socket/"},{"categories":null,"content":"Enviando comandos para o mpv Com a conex√£o foi estabelecida, √© poss√≠vel enviar comandos utilizando o m√©todo sendall() do objeto socket. Os comandos devem ser enviados no formato de bytes, codificados como UTF-8. Veja um exemplo: import socket # Define o caminho do arquivo de socket SOCKET_PATH = '/tmp/my_mpvsocket' def enviar_comando_mpv(command): # estabelece a conex√£o com a interface de soquete do MPV with socket.socket(socket.AF_UNIX, socket.SOCK_STREAM) as s: s.connect(SOCKET_PATH) # Envia um comando s.sendall(bytes(command, encoding='utf-8')) response = s.recv(1024) # retorna as resposta decodificada para string UTF-8 return response.decode() # carregar um arquivo de m√≠dia, todos os comandos devem # terminar com o caractere `\\n` para indicar o fim do comando comando = \"loadfile caminho/do/arquivo\\n\" resposta = enviar_comando_mpv(comando) print(resposta) # pausar a reprodu√ß√£o comando = \"cycle pause\\n\" resposta = enviar_comando_mpv(comando) print(resposta) # reproduzir o pr√≥ximo arquivo na lista de reprodu√ß√£o comando = \"playlist-next\\n\" resposta = enviar_comando_mpv(comando) print(resposta) Alguns dos comandos dispon√≠veis s√£o: loadfile: carrega um arquivo de m√≠dia. playlist-clear: limpa a lista de reprodu√ß√£o. playlist-add: adiciona um arquivo √† lista de reprodu√ß√£o. playlist-remove: remove um arquivo da lista de reprodu√ß√£o. playlist-move: move um arquivo dentro da lista de reprodu√ß√£o. playlist-next: reproduz o pr√≥ximo arquivo da lista de reprodu√ß√£o. playlist-prev: reproduz o arquivo anterior da lista de reprodu√ß√£o. seek: move a reprodu√ß√£o para um determinado tempo. pause: pausa ou despausa a reprodu√ß√£o. stop: para a reprodu√ß√£o. quit: fecha o mpv. Todos os comandos dispon√≠veis est√£o listados na documenta√ß√£o do MPV. A sintaxe para enviar comandos √© \u003ccomando\u003e [arg1 arg2]\\n, onde comando √© o nome do comando, arg1 arg2 s√£o os argumentos do comando separados por espa√ßos. √â altamente recomend√°vel consultar a documenta√ß√£o para obter informa√ß√µes detalhadas sobre todos os comandos dispon√≠veis e sua sintaxe exata. ","date":"04-12-2023","objectID":"/como_controlar_o_mpv_via_socket/:3:0","tags":null,"title":"Como controlar uma instancia do MPV via socket usando o Python","uri":"/como_controlar_o_mpv_via_socket/"},{"categories":null,"content":"Bibliotecas Python para controlar o MPV A interface de soquete √© uma maneira poderosa e flex√≠vel de controlar o MPV. Mas, para simplificar o controle por meio do Python e evitar erros de baixo n√≠vel, existem v√°rias bibliotecas que abstraem os detalhes de baixo n√≠vel, simplificando a intera√ß√£o com MPV. Aqui est√£o alguns exemplos: python-mpv-jsonipc: uma biblioteca Python que oferece uma interface de alto n√≠vel para interagir com o MPV usando JSON IPC. Isso abstrai muitos dos detalhes de baixo n√≠vel do soquete Unix do MPV e oferece uma maneira mais f√°cil de enviar comandos e receber respostas do MPV. MPV Python Binding: uma biblioteca Python que oferece uma interface de alto n√≠vel semelhante √† biblioteca python-mpv-jsonipc, mas usa a API de binding do MPV. Python-mpv: outra biblioteca Python que oferece uma interface de alto n√≠vel para interagir com o MPV, mas usa a API de soquete Unix. √â importante observar tamb√©m que o mpv oferece suporte a scripts Lua e JavaScript que podem ser usados para realizar tarefas complexas, como personaliza√ß√£o de teclas de atalho, modifica√ß√£o de legendas e muito mais. Com isso em mente, √© poss√≠vel explorar as possibilidades de integra√ß√£o entre o MPV e Python para criar aplicativos poderosos que controlam a reprodu√ß√£o de m√≠dia de maneira sofisticada e personalizada. MPV - Manual de refer√™ncia Python - socket IPC - Inter Process Communication Unix Domain Socket ","date":"04-12-2023","objectID":"/como_controlar_o_mpv_via_socket/:4:0","tags":null,"title":"Como controlar uma instancia do MPV via socket usando o Python","uri":"/como_controlar_o_mpv_via_socket/"},{"categories":null,"content":"A t√©cnica de versionamento de dotfiles consiste em criar um reposit√≥rio Git do tipo bare dentro de $HOME, que, ao contr√°rio de um reposit√≥rio Git padr√£o, n√£o possui um diret√≥rio de trabalho associado. Sendo assim, √© necess√°rio definir explicitamente o que o reposit√≥rio bare deve rastrear. Por fim, √© necess√°rio um alias para interagir com esse reposit√≥rio de forma exclusiva. Vantagens: N√£o h√° necessidade de usar ferramentas externas N√£o h√° uso de links simb√≥licos Os arquivos s√£o rastreados pelo Git √â poss√≠vel usar branches diferentes para computadores diferentes √â poss√≠vel replicar a configura√ß√£o facilmente em uma nova instala√ß√£o ","date":"04-09-2023","objectID":"/use_o_git_para_gerenciar_dotfiles/:0:0","tags":null,"title":"Use o git para gerenciar dotfiles","uri":"/use_o_git_para_gerenciar_dotfiles/"},{"categories":null,"content":"Configura√ß√£o inicial Para iniciar a configura√ß√£o do seu reposit√≥rio bare, execute os seguintes comandos no terminal: Cria o reposit√≥rio ~/.dotfiles git init --bare $HOME/.dotfiles Define o alias dotfiles alias dotfiles='/usr/bin/git --git-dir=$HOME/.dotfiles/ --work-tree=$HOME' Configura o Git para ignorar a $HOME inteira dotfiles config --local status.showUntrackedFiles no Adiciona o alias no ~/.bashrc echo \"alias dotfiles='/usr/bin/git --git-dir=$HOME/.dotfiles/ --work-tree=$HOME'\" \u003e\u003e $HOME/.bashrc Depois de executar a configura√ß√£o inicial, qualquer arquivo dentro da pasta $HOME pode ser versionado atrav√©s do alias dotfiles com as op√ß√µes normais do comando git, conforme mostrado abaixo: dotfiles status dotfiles add .vimrc dotfiles commit -m \"Add vimrc\" dotfiles add .bashrc dotfiles commit -m \"Add bashrc\" dotfiles push ","date":"04-09-2023","objectID":"/use_o_git_para_gerenciar_dotfiles/:1:0","tags":null,"title":"Use o git para gerenciar dotfiles","uri":"/use_o_git_para_gerenciar_dotfiles/"},{"categories":null,"content":"Configurando reposit√≥rio remoto Para configurar o reposit√≥rio remoto, primeiro crie um reposit√≥rio no seu Gitlab ou GitHub e siga os passos a seguir, substituindo o \u003cusername\u003e pelo seu usu√°rio no remoto. Adicione o remoto dotfiles remote add origin git@gitlab.com:\u003cusername\u003e/dotfiles.git dotfiles remote -v Envie os arquivos para o remoto dotfiles push -uf origin main ","date":"04-09-2023","objectID":"/use_o_git_para_gerenciar_dotfiles/:2:0","tags":null,"title":"Use o git para gerenciar dotfiles","uri":"/use_o_git_para_gerenciar_dotfiles/"},{"categories":null,"content":"Instalar os dotfiles em um novo sistema Primeiro, verifique se o alias foi adicionado ao seu .bashrc ou .zshrc. Certifique-se tamb√©m de adicionar a pasta onde voc√™ ir√° clonar o reposit√≥rio no arquivo .gitignore, para evitar problemas de recurs√£o. echo \".dotfiles\" \u003e\u003e .gitignore Agora, clone seus dotfiles em um reposit√≥rio bare em uma pasta oculta do seu $HOME: git clone --bare \u003cgit-repo-url\u003e $HOME/.dotfiles Defina o alias no escopo do shell atual: alias dotfiles='/usr/bin/git --git-dir=$HOME/.dotfiles/ --work-tree=$HOME' Fa√ßa o checkout do conte√∫do real do reposit√≥rio vazio para o seu $HOME: dotfiles checkout Nota: O passo anterior pode falhar e retornar uma mensagem de erro: error: The following untracked working tree files would be overwritten by checkout: .bashrc .gitignore Please move or remove them before you can switch branches. Aborting Isso ocorre porque sua pasta $HOME pode conter alguns arquivos de configura√ß√µes locais, que ser√£o substitu√≠dos pelos do Git. A solu√ß√£o √© simples: fa√ßa backup dos arquivos se voc√™ se importa com eles, ou remova-os. Segue abaixo um poss√≠vel atalho para mover todos os arquivos incorretos para uma pasta. mkdir -p .dotfiles-backup \u0026\u0026 \\ dotfiles checkout 2\u003e\u00261 | grep -e \"\\s+\\.\" | awk {'print $1'} | \\ xargs -I{} mv {} .dotfiles-backup/{} Nota: Se voc√™ teve o problema mencionado anteriormente, ap√≥s mover os arquivos, execute novamente o dotfiles checkout. Agora defina o valor de showUntrackedFiles como no para este reposit√≥rio: dotfiles config --local status.showUntrackedFiles no Pronto, a partir de agora voc√™ pode usar o alias definido anteriormente para gerenciar seus dotfiles na sua nova maquina: dotfiles status dotfiles add .vimrc dotfiles commit -m \"Add vimrc\" dotfiles add .bashrc dotfiles commit -m \"Add bashrc\" dotfiles push ","date":"04-09-2023","objectID":"/use_o_git_para_gerenciar_dotfiles/:3:0","tags":null,"title":"Use o git para gerenciar dotfiles","uri":"/use_o_git_para_gerenciar_dotfiles/"},{"categories":null,"content":"Ao executar testes automatizados em Python, √© comum receber avisos (warnings) durante a execu√ß√£o dos testes. Para lidar com esses avisos, o Pytest oferece diversas op√ß√µes para desativ√°-los. Neste artigo vamos explorar como utilizar a PYTEST_ADDOPTS para desabilita-los. ","date":"03-17-2023","objectID":"/desativar_avisos_no_pytest/:0:0","tags":null,"title":"PYTEST_ADDOPTS e como desabilitar warnings no pytest","uri":"/desativar_avisos_no_pytest/"},{"categories":null,"content":"Entendendo o problema Vamos imaginar que estamos executando testes em uma aplica√ß√£o Python utilizando o Pytest e nos deparamos com a seguinte sa√≠da: ===================================== warnings summary ====================================== tests/test_translator.py::test_translator_hello_world tests/test_translator.py::test_api_manager /home/ztz/projects/ztranslator/.venv/lib/python3.10/site-packages/httpx/_config.py:156: DeprecationWarning: ssl.PROTOCOL_TLS is deprecated context = ssl.SSLContext(ssl.PROTOCOL_TLS) tests/test_translator.py::test_translator_hello_world tests/test_translator.py::test_api_manager /home/ztz/projects/ztranslator/.venv/lib/python3.10/site-packages/httpx/_config.py:159: DeprecationWarning: ssl.OP_NO_SSL*/ssl.OP_NO_TLS* options are deprecated context.options |= ssl.OP_NO_TLSv1 tests/test_translator.py::test_translator_hello_world tests/test_translator.py::test_api_manager /home/ztz/projects/ztranslator/.venv/lib/python3.10/site-packages/httpx/_config.py:160: DeprecationWarning: ssl.OP_NO_SSL*/ssl.OP_NO_TLS* options are deprecated context.options |= ssl.OP_NO_TLSv1_1 -- Docs: https://docs.pytest.org/en/stable/warnings.html Esses avisos podem ser gerados por diversos motivos, como o uso de fun√ß√µes obsoletas, comportamentos n√£o recomendados, entre outros, e s√£o √∫teis para que o desenvolvedor identifique poss√≠veis problemas na sua aplica√ß√£o ou nas bibliotecas utilizadas. No entanto, em alguns casos, eles podem n√£o ser importantes para o teste em quest√£o, sujando a tela e tirando o foco do resultado dos testes. ","date":"03-17-2023","objectID":"/desativar_avisos_no_pytest/:1:0","tags":null,"title":"PYTEST_ADDOPTS e como desabilitar warnings no pytest","uri":"/desativar_avisos_no_pytest/"},{"categories":null,"content":"Entendendo o PYTEST_ADDOPTS PYTEST_ADDOPTS¬∂ This contains a command-line (parsed by the py:mod:shlex module) that will be prepended to the command line given by the user, see Builtin configuration file options for more information. O PYTEST_ADDOPTS √© uma vari√°vel de ambiente, que armazena par√¢metros de linha de comando, que durante a execu√ß√£o do pytest ser√£o adicionados a linha de comando fornecida pelo usu√°rio. √â poss√≠vel defini-la exportando-a no terminal ou direto no arquivo Makefile. ","date":"03-17-2023","objectID":"/desativar_avisos_no_pytest/:2:0","tags":null,"title":"PYTEST_ADDOPTS e como desabilitar warnings no pytest","uri":"/desativar_avisos_no_pytest/"},{"categories":null,"content":"Desativando os avisos na linha de comando Para desabilitar os avisos (warnings) no pytest, podemos utilizar a op√ß√£o -p no:warnings. Veja o exemplo a seguir: $ pytest -s -v -p no:warnings Outra op√ß√£o √© exportar a vari√°vel de ambiente PYTEST_ADDOPTS com a op√ß√£o -p no:warnings. Para isso usamos o comando export, veja o exemplo abaixo: $ export PYTEST_ADDOPTS=\"-p no:warnings\" $ poetry run pytest -s -v Com a vari√°vel PYTEST_ADDOPTS definida, o pytest ser√° executado com a op√ß√£o -p no:warnings, que desabilita todos os avisos (warnings) durante a execu√ß√£o dos testes. Caso voc√™ queira desabilitar somente alguns avisos espec√≠ficos, √© poss√≠vel utilizar a op√ß√£o -W do pytest em conjunto com a op√ß√£o -p no:warnings. Veja o exemplo abaixo: $ export PYTEST_ADDOPTS=-p no:warnings -W ignore::DeprecationWarning $ poetry run pytest -s -v Com a op√ß√£o -W ignore::DeprecationWarning, o pytest ir√° desabilitar somente os avisos do tipo DeprecationWarning. Para remover a vari√°vel PYTEST_ADDOPTS, use o comando: $ unset PYTEST_ADDOPTS Utilizando o comando env a vari√°vel de ambiente PYTEST_ADDOPTS ser√° definida apenas para a execu√ß√£o do pytest e n√£o afetar√° outras execu√ß√µes. Veja o exemplo abaixo: $ env PYTEST_ADDOPTS=\"-p no:warnings\" pytest -s -v ","date":"03-17-2023","objectID":"/desativar_avisos_no_pytest/:2:1","tags":null,"title":"PYTEST_ADDOPTS e como desabilitar warnings no pytest","uri":"/desativar_avisos_no_pytest/"},{"categories":null,"content":"Desativar os avisos usando o makefile Para utilizar o PYTEST_ADDOPTS em conjunto com o Makefile, podemos definir a vari√°vel de ambiente no in√≠cio do arquivo, antes da defini√ß√£o da regra test. Veja o exemplo abaixo: export PYTEST_ADDOPTS=-p no:warnings -W ignore::DeprecationWarning .PHONY: test test: poetry run pytest -s -v ","date":"03-17-2023","objectID":"/desativar_avisos_no_pytest/:2:2","tags":null,"title":"PYTEST_ADDOPTS e como desabilitar warnings no pytest","uri":"/desativar_avisos_no_pytest/"},{"categories":null,"content":"Conclus√£o O Pytest √© uma ferramenta importante para garantir a qualidade do c√≥digo em projetos Python. No entanto, durante a execu√ß√£o dos testes automatizados, podem ser gerados avisos (warnings) que, em alguns casos, podem ser irrelevantes. Nesse sentido, a op√ß√£o -p no:warnings, definida na vari√°vel de ambiente PYTEST_ADDOPTS¬∂ pode ser utilizada para desativar todos os avisos durante a execu√ß√£o dos testes. No entanto, √© importante lembrar que esses avisos podem conter informa√ß√µes importantes para identificar poss√≠veis problemas na aplica√ß√£o ou bibliotecas utilizadas. Portanto, a desativa√ß√£o dos avisos deve ser feita com cuidado e de forma criteriosa, de modo a n√£o comprometer a qualidade do c√≥digo. ","date":"03-17-2023","objectID":"/desativar_avisos_no_pytest/:3:0","tags":null,"title":"PYTEST_ADDOPTS e como desabilitar warnings no pytest","uri":"/desativar_avisos_no_pytest/"},{"categories":null,"content":"O editor de texto neovim usa o formato de arquivo .spl para armazenar palavras de uma determinada linguagem, essas s√£o usadas para fazer a verifica√ß√£o ortogr√°fica. O arquivo .spl √© um arquivo bin√°rio, esse formato proporciona o r√°pido carregamento da lista de palavras ao mesmo tempo que a mant√©m pequena. O arquivo .spl pode ser criado a partir de arquivos myspell .aff e .dic usados pelo verificador ortogr√°fico VERO sigla que significa VERificador Ortografico do LibreOffice. ","date":"05-15-2022","objectID":"/neovim_spell_check/:0:0","tags":null,"title":"Corretor ortogr√°fico no Neovim","uri":"/neovim_spell_check/"},{"categories":null,"content":"Gerar um arquivo spell Para gerar o arquivo .spl portugu√™s do Brasil siga os passos a seguir: $ mkdir /tmp/vero \u0026\u0026 cd /tmp/vero $ wget https://pt-br.libreoffice.org/assets/Uploads/PT-BR-Documents/VERO/VeroptBR3215AOC.oxt $ file VeroptBR3215AOC.oxt VeroptBR3215AOC.oxt: Zip archive data, at least v2.0 to extract, compression method=deflate $ unzip VeroptBR3215AOC.oxt Abra o vim no diret√≥rio corrente e execute o comando :mkspell pt pt_BR para gerar o .spl :mkspell pt pt_BR # ... Sa√≠da suprimida Reading dictionary file pt_BR.dic... Compressed case-folded of 16207519 nodes; 290324 (1%) remaining Compressed keep-case of 189406 nodes; 10459 (5%) remaining # ... Sa√≠da suprimida Compressed keep-case of 596998 nodes; 596998 (100%) remaining Compressing word tree... Compressed case-folded of 55323495 nodes; 47773995 (86%) remaining Compressed keep-case of 746484 nodes; 601437 (80%) remaining Writing spell file pt.utf-8.spl... Done! A sa√≠da √© um arquivo pt.utf-8.spl, mova-o para ~/.local/share/nvim/spell/ $ mv /tmp/vero/pt.utf-8.spl ~/.local/share/nvim/spell Obs.: De acordo com a documenta√ß√£o, o neovim busca por spellfiles no runtimepath no diret√≥rio spell. ","date":"05-15-2022","objectID":"/neovim_spell_check/:1:0","tags":null,"title":"Corretor ortogr√°fico no Neovim","uri":"/neovim_spell_check/"},{"categories":null,"content":"Uso A medida que o corretor ortogr√°fico detecta a palavra incorreta, essa √© marcada com um sublinhado. Para corrigi-la, posicione o cursor sob a mesma, no modo Visual pressione z + =. Um menu ir√° mostrar as palavras sugeridas pelo corretor, ent√£o √© s√≥ escolher a correta. No modo de inser√ß√£o, com o cursor posicionado no fim da palavra com erro, pressione ctrl + x + s para exibir a caixa de sugest√µes, funciona como o autocompletar de palavras usando o ctrl + p. Ativar o corretor ortogr√°fico: :setlocal spell spelllang=pt_br,en Obs.: √â possivel ativar mais de uma linguagem Carregar um arquivo .spl e ativ√°-lo: : setlocal spell spellfile=\"/usr/share/vim/vimfiles/spell/pt.utf-8.spl\" spelllang=pt_br Para desativar o corretor: :set nospell ","date":"05-15-2022","objectID":"/neovim_spell_check/:2:0","tags":null,"title":"Corretor ortogr√°fico no Neovim","uri":"/neovim_spell_check/"},{"categories":null,"content":"Comandos do corretor ortogr√°fico no modo visual Comando A√ß√£o ]s busca a pr√≥xima palavra [s busca a palavra anterior z= mostra a lista de sugest√µes para a palavra zg adiciona a palavra sob o cursor no dicion√°rio, assim ela n√£o ser√° mais marcada como errada zug desfaz a √∫ltima palavra adicionada zw remove a palavra sob o cursor do dicion√°rio, assim ela ser√° marcada como errada zuw desfaz a √∫ltima palavra removida ","date":"05-15-2022","objectID":"/neovim_spell_check/:3:0","tags":null,"title":"Corretor ortogr√°fico no Neovim","uri":"/neovim_spell_check/"},{"categories":null,"content":"Comandos do corretor ortogr√°fico no modo inser√ß√£o Comando A√ß√£o ctrl + x + s Exibir a caixa de sugest√µes ctrl + n Avan√ßar para a pr√≥xima sugest√£o ctrl + p Voltar para a sugest√£o anterior ","date":"05-15-2022","objectID":"/neovim_spell_check/:4:0","tags":null,"title":"Corretor ortogr√°fico no Neovim","uri":"/neovim_spell_check/"},{"categories":null,"content":"Ativar o corretor ortogr√°fico baseado no tipo de arquivo vim.cmd [[ autocmd BufRead, BufNewFile *.md setlocal spell spelllang=pt_br]] ","date":"05-15-2022","objectID":"/neovim_spell_check/:5:0","tags":null,"title":"Corretor ortogr√°fico no Neovim","uri":"/neovim_spell_check/"},{"categories":null,"content":"Ativar o corretor ortogr√°fico sob demanda nnoremap \u003csilent\u003e \u003cF3\u003e :set spell!\u003cCR\u003e inoremap \u003csilent\u003e \u003cF3\u003e\u003cC-O\u003e:set spell!\u003cCR\u003e ","date":"05-15-2022","objectID":"/neovim_spell_check/:6:0","tags":null,"title":"Corretor ortogr√°fico no Neovim","uri":"/neovim_spell_check/"},{"categories":null,"content":"Configura√ß√£o global (opcional) No arquivo init.vim \"spell languages set spelllang=pt_br No arquivo init.lua vim.o.spelllang=\"pt_br\" ","date":"05-15-2022","objectID":"/neovim_spell_check/:7:0","tags":null,"title":"Corretor ortogr√°fico no Neovim","uri":"/neovim_spell_check/"},{"categories":null,"content":"Outras linguagens No web site do vim.org existe um diret√≥rio com as linguagens usadas pelo vim. Ent√£o simplesmente escolha uma, baixe-a no diret√≥rio ~/.local/share/nvim/spell e ative o corretor ortogr√°fico. Nvim documentation: spell ","date":"05-15-2022","objectID":"/neovim_spell_check/:8:0","tags":null,"title":"Corretor ortogr√°fico no Neovim","uri":"/neovim_spell_check/"},{"categories":null,"content":"O Openwrt pode ser gerenciado no terminal via ssh, ou pela interface web do usu√°rio LuCI. O uso da interface web facilita a administra√ß√£o do sistema, no entanto, por padr√£o a interface web n√£o tem suporte a conex√£o segura usando o HTTPS. Por esse motivo existe o risco de um invasor capturar o tr√°fego de rede e obter as credenciais de autentica√ß√£o, visto que a troca de mensagens entre cliente e servidor sem a camada de seguran√ßa do HTTPS (SSL/TLS) √© feito em texto puro. O Openwrt oferece a op√ß√£o de implementar o HTTPS, mas √© preciso gerar e armazenar um certificado TLS autoassinado e requer a instala√ß√£o de pacotes adicionais (uci-ssl e depend√™ncias). No caso de dispositivos com pouca memoria, instalar pacotes adicionais n√£o √© uma op√ß√£o, ent√£o gostaria de apresentar outra configura√ß√£o que pode ser usada para proteger o acesso √† interface web do Openwrt, que √© encapsular o tr√°fego http via ssh. Primeiro vamos fazer uma c√≥pia e olhar o arquivo de configura√ß√£o padr√£o do servidor web. $ scp openwrt:/etc/config/uhttpd ~ uhttpd 100% 710 458.3KB/s 00:00 $ head ~/uhttpd # Server configuration config uhttpd main # HTTP listen addresses, multiple allowed list listen_http 0.0.0.0:80 list listen_http [::]:80 # HTTPS listen addresses, multiple allowed list listen_https 0.0.0.0:443 list listen_https [::]:443 Usando o comando netstat -apn | grep :80 listamos os soquetes TCP/IP abertos pelo servidor web. root@openwrt:~# netstat -apn | grep :80 tcp 0 0 0.0.0.0:80 0.0.0.0:* LISTEN tcp 0 0 :::80 :::* LISTEN root@openwrt:~# netstat -ana | grep :443 root@openwrt:~# A linha 0.0.0.0:80 nos diz que o computador local esta ouvindo a porta 80, a espera de conex√µes de qualquer computador remoto. O 0.0.0.0 √© um endere√ßo especial que representa todas as interfaces de rede com um IP v√°lido nesse host, por exemplo, poder√≠amos ter duas interfaces com os seguintes endere√ßos 192.168.1.1, 172.17.0.2 como o servidor web escuta usando o endere√ßo 0.0.0.0:80 ambos respondem por esse endere√ßo de socket. Agora a configura√ß√£o do servidor web uHTTPd deve ser ajustada, para fazer isso conectamos ao roteador via SSH e abrimos o arquivo /etc/config/uhttpd. # vim /etc/config/uhttpd Em seguida, comentamos as linhas que cont√™m list listen_http * e adicionamos a linha list listen_http 127.0.0.1:80 . A seguir temos as primeiras linhas do arquivo de configura√ß√£o ap√≥s a edi√ß√£o. # Server configuration config uhttpd main # HTTP listen addresses, multiple allowed # list listen_http 0.0.0.0:80 # esta linha deve estar comentada # list listen_http [::]:80 # esta linha deve estar comentada # HTTPS listen addresses, multiple allowed # list listen_https 0.0.0.0:443 # esta linha deve estar comentada # list listen_https [::]:443 # esta linha deve estar comentada # linha adicionada list listen_http 127.0.0.1:80 ... Salve o arquivo e reinicie o servi√ßo uHTTPd usando o comando: # /etc/init.d/uhttpd restart Com o comando netstat vemos que agora nosso servidor web escuta em um novo endere√ßo: root@openwrt:~# netstat -na | grep :80 tcp 0 0 127.0.0.1:80 0.0.0.0:* LISTEN O uso do endere√ßo 127.0.0.1 tem objetivo de restringir o acesso a interface web para host remotos usando a interface de loopback, que √© uma interface de rede virtual que √© reservada para a comunica√ß√£o interna no host. Depois de reiniciar o servidor, a interface web do LuCI n√£o esta acess√≠vel atrav√©s do IP usual 192.168.1.1, agora o servidor web escuta por novas conex√µes usando o endere√ßo 127.0.0.1:80 e s√≥ podemos alcan√ß√°-la por meio de um t√∫nel ssh. Para criar o t√∫nel, execute o seguinte comando no terminal: veja: 127.0.0.1 vs 0.0.0.0 # ssh -L 127.0.0.1:8080:127.0.0.1:80 root@192.168.1.1 veja: manual ssh -L Encaminhamento de portas Para evitar sempre digitar todo o comando que cria o t√∫nel ssh adicione ao arquivo ~/.ssh/config o seguite: Host luci-tunnel Hostname openwrt.lan Port 22 User root LocalForward 127.0.0.1:8080 127.0.0.1:80 Ent√£o o tunel ssh pode ser criado com o seguinte comando: # ssh luci-tunnel O endere√ßo local 127.0.0.1","date":"04-05-2022","objectID":"/openwrt-interface-web-seguranca/:0:0","tags":null,"title":"Protegendo o acesso a interface web do Openwrt","uri":"/openwrt-interface-web-seguranca/"},{"categories":null,"content":"Seguran√ßa adicional Para minimizar os riscos de acesso n√£o autorizado atrav√©s da interface web, ative o servidor web via ssh somente quando necess√°rio. /etc/init.d/uhttpd disable /etc/init.d/uhttpd stop ","date":"04-05-2022","objectID":"/openwrt-interface-web-seguranca/:1:0","tags":null,"title":"Protegendo o acesso a interface web do Openwrt","uri":"/openwrt-interface-web-seguranca/"},{"categories":null,"content":"uci comandos O uci pode ajustar a configura√ß√£o do uhttpd sem usar um editor de texto, no terminal digite as linhas a seguir: # uci -q delete uhttpd.main.listen_http # uci add_list uhttpd.main.listen_http=\"127.0.0.1:80\" # uci add_list uhttpd.main.listen_http=\"[::1]:80\" # uci -q delete uhttpd.main.listen_https # uci add_list uhttpd.main.listen_https=\"127.0.0.1:443\" # uci add_list uhttpd.main.listen_https=\"[::1]:443\" # uci commit uhttpd # /etc/init.d/uhttpd restart ","date":"04-05-2022","objectID":"/openwrt-interface-web-seguranca/:2:0","tags":null,"title":"Protegendo o acesso a interface web do Openwrt","uri":"/openwrt-interface-web-seguranca/"},{"categories":null,"content":"Teclas de atalho fornecem um m√©todo r√°pido e f√°cil para a executar comandos a partir de uma combina√ß√£o de teclas predefinida. No openbox para definir uma tecla de atalho basta editar o arquivo ~/.config/openbox/rc.xml. ","date":"05-31-2021","objectID":"/atalhos-teclado-openbox/:0:0","tags":null,"title":"Como configurar teclas de atalho no Openbox","uri":"/atalhos-teclado-openbox/"},{"categories":null,"content":"Syntax \u003ckeyboard\u003e ... \u003ckeybind key=\"KEY-COMBINATION...\"\u003e ...ACTIONS... \u003c/keybind\u003e ... \u003c/keyboard\u003e KEY-COMBINATION √© a combina√ß√£o de teclas que liga a uma a√ß√£o. O formato para KEY-COMBINATION √©: Modificador-Modificador-Tecla (ex.: C-S-T). Qualquer n√∫mero de modificadores (0 ou mais) podem ser usados juntos e cada um √© separado por um ‚Äú-‚Äù. Modificadores S tecla Shift C tecla Control A tecla Alt W tecla Super (tecla Windows) M tecla Meta H tecla Hyper Exemplo \u003ckeybind key=\"S-A-T\"\u003e \u003caction name=\"Execute\"\u003e \u003ccommand\u003epython /caminho/para/execut√°vel\u003c/command\u003e \u003c/action\u003e \u003c/keybind\u003e O Openbox nem sempre reflete automaticamente as altera√ß√µes feitas em seus arquivos de configura√ß√µes, consequentemente ser√° necess√°rio recarregar manualmente esses arquivos depois de editados. $ openbox --reconfigure Refer√™ncia: http://openbox.org/wiki/Help:Bindings#Key_bindings ","date":"05-31-2021","objectID":"/atalhos-teclado-openbox/:1:0","tags":null,"title":"Como configurar teclas de atalho no Openbox","uri":"/atalhos-teclado-openbox/"},{"categories":null,"content":" Hi there Este √© um espa√ßo dedicado √† documenta√ß√£o, armazenamento de notas, trechos de c√≥digo e links para refer√™ncias futuras. **üì´ Reach me at:** ","date":"01-01-0001","objectID":"/about/:0:0","tags":null,"title":"Sobre - Andr√© P. Santos","uri":"/about/"}]